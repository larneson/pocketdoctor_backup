<!DOCTYPE html>
<html>
<head>
<title>Linnea Blood Pressure</title>
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <style type='text/css'> body{padding:50px;}
  .date_pressure_col{width:25%}
  .time_pressure_col{width:15%}
  
  </style>
<script>
var whatDate = function(){
	var d = new Date();
	var month = d.getMonth()+1;
	var day = d.getDate();
	var output = month + '/' + day +'/' + d.getFullYear();
	return output;
}
var whatTime = function(){
	var d = new Date();
	var hours = d.getHours();
	var minutes = d.getMinutes();
	if (minutes<10){minutes='0'+minutes}
	var output = hours + ':' + minutes;
	return output;
}
var whatMeal = function(){
	var d = new Date();
	var hours = d.getHours();
	if (hours<=11){
		$('#meal_input').val('Breakfast');}
	else if (hours>11&&hours<=16){
		$('#meal_input').val('Lunch');}
	else if(hours>16){
		$('#meal_input').val('Dinner');}
}
var makeSugar=function(){
$('#add_sugar').click(function(){
	var reading_text = $('#reading_input').val();
	if (reading_text !=''){
		var date_text = whatDate();
		var time_text = whatTime();
		if ($('#meal_input').val()!='None Selected'){
			var meal_text = $('#meal_input').val();}
		else {
			var meal_text = '';}
		if ($('#before_after_input').val()=='Before Eating'){
			var before_after_text = 'Before';
			$('#before_after_input').val('After Eating')}
		else if ($('#before_after_input').val()=='After Eating'){
			var before_after_text = 'After';}
		else{
			var before_after_text = '';}
		if($('#sugar_log tr').first().find('.before_after_col').text()=='Before' &&
		$('#sugar_log tr').first().find('.date_sugar_col').text()==date_text &&
		$('#sugar_log tr').first().find('.meal_col').text()==meal_text &&
		before_after_text == 'After' &&
		$('#sugar_log tr').first().find('.date_sugar_col').attr('rowspan')!=2){
			$('#sugar_log tr').first().find('.date_sugar_col').attr('rowspan','2');
			$('#sugar_log tr').first().find('.meal_col').attr('rowspan','2');
			$('tr').first().after('<tr><td class="before_after_col">'+before_after_text+'</td><td class="reading_col">'+reading_text+'</td><td class="time_sugar_col">'+time_text+'</td></tr>');
			
			}
		else{
			$('#sugar_log').prepend('<tr> <td class="date_sugar_col">'+ date_text+'</td> <td class="meal_col">'+meal_text+'</td><td class="before_after_col">'+before_after_text+'</td><td class="reading_col">'+reading_text+'</td><td class="time_sugar_col">'+time_text+'</td></tr>');
		}
	}
	});
}

$(document).ready(function(){
	whatMeal();
	$('#add_pressure').click(function(){
		var date_text = whatDate();
		var time_text = whatTime();
		var systolic_text = $('#systolic_input').val();
		var diastolic_text = $('#diastolic_input').val();
		$('#pressure_log').prepend(
		'<tr><td class="date_pressure_col">'+date_text+'</td> <td class="pressure_col">'+systolic_text+' / '+diastolic_text+'</td><td class="time_pressure_col">'+time_text+'</td><td><input type="text"/></td></tr>');
		
	});
	makeSugar();
});
</script>
</head>

<body>
<div  class="input-group" id='pressure_input'>
<h3>Add Blood Pressure Data</h3>
    	
    	<input type="text"  id="systolic_input" value="" placeholder="Systolic " />
    	&nbsp/&nbsp
    	<input type="text" id="diastolic_input" value="" placeholder="Diastolic" />
   		<input type='submit' id='add_pressure' value='Add' class="btn btn-primary add_button"/>
	
		</div>	
<table id='pressure_log' class='table'>
	<h4>Blood Pressure</h4>
</table>

<div id='sugar_input'>
<h3>Add Blood Sugar Data</h3>
	<select id='meal_input' class="form-control" value=''>
  			<option>None Selected</option>
  			<option>Breakfast</option>
  			<option>Lunch</option>
  			<option>Dinner</option>
		</select>
	<select id='before_after_input' class="form-control" >
  			<option>None Selected</option>
  			<option>Before Eating</option>
  			<option>After Eating</option>
		</select>
	<input type='text' id='reading_input'/>
	<input type='submit' id='add_sugar' value='Add' class="btn btn-primary add_button"/>

</div>

<table id='sugar_log' class='table'>
	<h4>Blood Sugar</h4>
</table>

</body>
</html>